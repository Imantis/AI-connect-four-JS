$(document).ready(function(){let a="player";const r=6,v=7;let t;var s=[];function l(a,e){let t=0,l=!1,r=$("."+a);return s.forEach(e=>{if(e.forEach(e=>$("[data-element="+e+"]").hasClass(a)?void t++:(t=0,null)),4<=t)return l=!0,null}),l&&"future"!==e&&(r.first().hasClass("active-player")?alert("Player win!"):r.first().hasClass("active-ai")&&alert("AI win!"),$(".element").addClass("active")),l}function n(e){let a=e.data("element"),t=e,l;if(a>=r*v-r)return t;for(;a<=v*r;)if(a+=v,l=t,t=$("[data-element="+a+"]"),!t.length||t.hasClass("active"))return l;return"Error"}function i(){var e=function(){let e=[],a,t,l,r;for(a=1;a<=v;a++){console.log(a),e["level_1_turn_"+a]={value:a,next_level:[]};var s=[];for(t=1;t<=v;t++){s["level_2_turn_"+t]={value:t,next_level:[]};var n=[];for(l=1;l<=v;l++){n["level_3_turn_"+l]={value:l,next_level:[]};var i=[];for(r=1;r<=v;r++)i["level_4_turn_"+r]={value:r,next_level:[]};n["level_3_turn_"+l].next_level=i}s["level_2_turn_"+t].next_level=n}e["level_1_turn_"+a].next_level=s}return console.log(e),Math.floor(Math.random()*Math.floor(7))+1}();t=n($("[data-element="+e+"]")),"Error"===t?alert(t):(t.addClass("active-ai").addClass("active"),a="player",l("active-ai"))}!function(){let e,a;for(e=0;e<r;e++)a=e*v,s.push([a+1,a+2,a+3,a+4]),s.push([a+2,a+3,a+4,a+5]),s.push([a+3,a+4,a+5,a+6]),s.push([a+4,a+5,a+6,a+7]);for(e=1;e<=v;e++)a=e,s.push([a,a+v,a+2*v,a+3*v]),s.push([a+v,a+2*v,a+3*v,a+4*v]),s.push([a+2*v,a+3*v,a+4*v,a+5*v]);for(e=1;e<=v-3;e++)a=e,s.push([a,a+(v+1),a+(2*v+2),a+(3*v+3)]),s.push([a+v,a+(2*v+1),a+(3*v+2),a+(4*v+3)]),s.push([a+2*v,a+(3*v+1),a+(4*v+2),a+(5*v+3)]);for(e=4;e<=v;e++)a=e,s.push([a,a+(v-1),a+(2*v-2),a+(3*v-3)]),s.push([a+v,a+(2*v-1),a+(3*v-2),a+(4*v-3)]),s.push([a+2*v,a+(3*v-1),a+(4*v-2),a+(5*v-3)]);console.log(s)}(),$(".element").each(function(e){$(this).attr("data-element",e+1),$(this).append(e+1)}),$("[data-restart-game-first-player]").click(function(){alert("Game restarted. First player step!"),a="player",$(".active").removeClass("active-player").removeClass("active-ai").removeClass("active")}),$("[data-restart-game-first-ai]").click(function(){alert("Game restarted. First AI step!"),a="ai",$(".active").removeClass("active-player").removeClass("active-ai").removeClass("active"),i()}),$(".element").click(function(){if(!$(this).hasClass("active")){let e=!1;"player"===a&&(t=n($(this)),"Error"===t?alert(t):(t.addClass("active-player").addClass("active"),a="ai",e=l("active-player")),e||i())}})});