$(document).ready(function(){let e="player";const r=6,l=7;let t;var i=[];function s(e,a){let t=0,s=!1,r=$("."+e);return i.forEach(a=>{if(a.forEach(a=>$("[data-element="+a+"]").hasClass(e)?void t++:(t=0,null)),4<=t)return s=!0,null}),s&&"future"!==a&&(r.first().hasClass("active-player")?alert("Player win!"):r.first().hasClass("active-ai")&&alert("AI win!"),$(".element").addClass("active")),s}function n(a){let e=a.data("element"),t=a,s;if(e>=r*l-r)return t;for(;e<=l*r;)if(e+=l,s=t,t=$("[data-element="+e+"]"),!t.length||t.hasClass("active"))return s;return"Error"}function c(){var a=function(){let a;for(a=1;a<=l;a++)t=n($("[data-element="+a+"]")),t.addClass("active-ai").addClass("active").addClass("think"),e="player",$(".think").removeClass("active-player").removeClass("active-ai").removeClass("active").removeClass("think");return Math.floor(Math.random()*Math.floor(7))+1}();t=n($("[data-element="+a+"]")),"Error"===t?alert(t):(t.addClass("active-ai").addClass("active"),e="player",s("active-ai"))}!function(){let a,e;for(a=0;a<r;a++)e=a*l,i.push([e+1,e+2,e+3,e+4]),i.push([e+2,e+3,e+4,e+5]),i.push([e+3,e+4,e+5,e+6]),i.push([e+4,e+5,e+6,e+7]);for(a=1;a<=l;a++)e=a,i.push([e,e+l,e+2*l,e+3*l]),i.push([e+l,e+2*l,e+3*l,e+4*l]),i.push([e+2*l,e+3*l,e+4*l,e+5*l]);for(a=1;a<=l-3;a++)e=a,i.push([e,e+(l+1),e+(2*l+2),e+(3*l+3)]),i.push([e+l,e+(2*l+1),e+(3*l+2),e+(4*l+3)]),i.push([e+2*l,e+(3*l+1),e+(4*l+2),e+(5*l+3)]);for(a=4;a<=l;a++)e=a,i.push([e,e+(l-1),e+(2*l-2),e+(3*l-3)]),i.push([e+l,e+(2*l-1),e+(3*l-2),e+(4*l-3)]),i.push([e+2*l,e+(3*l-1),e+(4*l-2),e+(5*l-3)]);console.log(i)}(),$(".element").each(function(a){$(this).attr("data-element",a+1),$(this).append(a+1)}),$("[data-restart-game-first-player]").click(function(){alert("Game restarted. First player step!"),e="player",$(".active").removeClass("active-player").removeClass("active-ai").removeClass("active")}),$("[data-restart-game-first-ai]").click(function(){alert("Game restarted. First AI step!"),e="ai",$(".active").removeClass("active-player").removeClass("active-ai").removeClass("active"),c()}),$(".element").click(function(){if(!$(this).hasClass("active")){let a=!1;"player"===e&&(t=n($(this)),"Error"===t?alert(t):(t.addClass("active-player").addClass("active"),e="ai",a=s("active-player")),a||c())}})});